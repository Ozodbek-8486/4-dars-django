 {% extends "base.html" %}
{% load static %}


{% block content %}

<style>
  body{
    background-color: white;
  }

    form {
      display: flex;
      align-items: center;
      padding: 10px;
      border-radius: 10px;
      max-width: 500px;
      width: 90%;
    }


    .input-container {
      position: relative;
      flex: 1;
    }


    .input-container svg.search-icon {
      position: absolute;
      left: 10px;
      top: 50%;
      transform: translateY(-50%);
      width: 18px;
      height: 18px;
      color: #9ca3af;
    }


    .input-container svg.mic-icon {
      position: absolute;
      right: 10px;
      top: 50%;
      transform: translateY(-50%);
      width: 16px;
      height: 16px;
      color: #9ca3af;
      cursor: pointer;
      transition: color 0.2s ease;
    }

    .input-container svg.mic-icon:hover {
      color: #fff;
    }

  
    input {
      width: 100%;
      padding: 10px 35px 10px 35px;
      border: 1px solid #4b5563;
      border-radius: 8px;
      background: #111827;
      color: #fff;
      font-size: 14px;
      outline: none;
      transition: border 0.3s ease;
    }

    input:focus {
      border-color: #3b82f6;
    }

   
    button {
      margin-left: 10px;
      padding: 10px 15px;
      background-color: #2563eb;
      border: none;
      color: white;
      border-radius: 8px;
      cursor: pointer;
      display: flex;
      align-items: center;
      font-size: 14px;
      transition: background 0.3s ease;
    }

    button:hover {
      background-color: #1d4ed8;
    }

    button svg {
      width: 16px;
      height: 16px;
      margin-right: 6px;
      color: white;
    }

    .clear{
      margin-left: 3%;
      text-decoration: none;
      background-color: rgb(230, 20, 20);
      color: white;
      padding: 1.5%;
      border-radius: 8px;
    }

</style>



  <form>
    <div class="input-container">
    
    <svg class="search-icon" viewBox="0 0 21 21" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path
    d="M19 19l-4.35-4.35m2.35-6.65a7 7 0 1 1-14 0 7 7 0 0 1 14 0Z"
    stroke-width="2"
    stroke-linejoin="round"
    stroke-linecap="round"
    stroke="currentColor"
  ></path>
</svg>


    
      <input type="search" placeholder="Search..." name="search" value="{{ request.GET.search }}" >

    </div>

  
    <button type="submit">
      <svg viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"
              stroke-width="2" stroke-linejoin="round" stroke-linecap="round" stroke="currentColor"></path>
      </svg>
      Search
    </button>
    {% if request.GET.search %}
        <a href="{% url 'books:book_list' %}"  class="clear">  
          <svg class="search-icon" viewBox="0 0 21 21" fill="none" xmlns="http://www.w3.org/2000/svg" style="width: 20px;">
    <path
      d="M5 5l11 11M16 5l-11 11"
      stroke-width="2"
      stroke-linejoin="round"
      stroke-linecap="round"
      stroke="currentColor"
    ></path>
  </svg> Tozalash</a>

        
      {% endif %}

  </form>

     

  <ul>
    {% for book in books %}
        <li>{{ book.title }}</li>
    {% endfor %}
</ul>

<div class="container mt-5">
  <h1 class="text-center mb-4 text-primary fw-bold">ðŸ“š Kitoblar roâ€˜yxati</h1>

  <div class="row">
    {% for book in page_obj %}
      <div class="col-md-4 mb-4">
        <div class="card shadow-sm h-100">
          {% if book.image %}
            <img src="{{ book.image.url }}" class="card-img-top" alt="{{ book.title }}" style="height: 250px; object-fit: cover;">
          {% else %}
            <div class="d-flex align-items-center justify-content-center bg-light" style="height: 250px;">
              <span class="text-muted">ðŸ“˜ Rasm mavjud emas</span>
            </div>
          {% endif %}
          
          <div class="card-body d-flex flex-column">
            <h5 class="card-title text-dark fw-bold">{{ book.title }}</h5>
            <p class="text-muted mb-1"><strong>Muallif:</strong> {{ book.author }}</p>
            <p class="card-text mt-2 flex-grow-1">{{ book.description|truncatewords:20 }}</p>
            <a href="{% url 'books:book_detail' book.id %}" class="btn btn-primary w-100 mt-auto">Batafsil â†’</a>
          </div>
        </div>
      </div>
    {% empty %}
      <div class="col-12 text-center text-muted">
        <p>ðŸ˜¢ Hozircha kitoblar mavjud emas.</p>
      </div>
    {% endfor %}
  </div>

  <div class="d-flex justify-content-center align-items-center mt-4">
    <nav>
      <ul class="pagination">
        {% if page_obj.has_previous %}
          <li class="page-item">
            <a class="page-link" href="?page={{ page_obj.previous_page_number }}">â¬… Oldingi</a>
          </li>
        {% else %}
          <li class="page-item disabled"><span class="page-link">â¬… Oldingi</span></li>
        {% endif %}

        <li class="page-item disabled mx-2">
          <span class="page-link">
            Sahifa {{ page_obj.number }} / {{ page_obj.paginator.num_pages }}
          </span>
        </li>

        {% if page_obj.has_next %}
          <li class="page-item">
            <a class="page-link" href="?page={{ page_obj.next_page_number }}">Keyingi âž¡</a>
          </li>
        {% else %}
          <li class="page-item disabled"><span class="page-link">Keyingi âž¡</span></li>
        {% endif %}
      </ul>
    </nav>
  </div>
</div>


{% endblock %}
